<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Round Transition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        .center-wrap { min-height: 80vh; display:flex; align-items:center; justify-content:center }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    <div class="center-wrap">
        <div class="max-w-2xl text-center p-8 rounded-xl bg-gradient-to-br from-indigo-800 to-indigo-600 shadow-2xl">
            <h1 id="title" class="text-3xl font-extrabold text-white mb-3">Round Transition</h1>
            <p id="message" class="text-lg text-indigo-100 mb-6">Preparing the next round...</p>

            <div class="flex justify-center gap-3">
                <button id="continueBtn" class="px-6 py-3 bg-yellow-400 hover:bg-yellow-500 rounded-lg font-bold text-gray-900">Continue</button>
                <a href="geofun.html" class="px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold text-gray-100">Back</a>
            </div>
        </div>
    </div>

    <script>
        // Parse query params
        const params = new URLSearchParams(window.location.search);
        const from = params.get('from') || '';
        const to = params.get('to') || '';
        const startIndex = params.get('startIndex');
        const mode = params.get('mode') || '';

        const title = document.getElementById('title');
        const message = document.getElementById('message');
        const continueBtn = document.getElementById('continueBtn');

        title.textContent = `Round ${from} Finished`;
        let extra = mode ? ` Mode: ${mode}` : '';
        message.textContent = `Round ${from} is finished. Round ${to} is starting now.${extra}`;

        continueBtn.addEventListener('click', () => {
            // If a startIndex is provided, save it to localStorage so the main app loads that question
            if (startIndex !== null && startIndex !== undefined && startIndex !== '') {
                try {
                    localStorage.setItem('quizCurrentIndex', startIndex);
                } catch (e) {
                    console.warn('Could not set start index in localStorage', e);
                }
            }

            // Return to the main quiz page (geofun)
            window.location.href = 'geofun.html';
        });
    </script>
</body>
</html>
